// A launch configuration that compiles the extension and then opens it inside a new window
// Use IntelliSense to learn about possible attributes.
// Hover to view descriptions of existing attributes.
// For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
{
	"version": "0.2.0",
	"configurations": [
		/////////////////////// Testing the extension on a toy project ///////////////////////
		{
			"name": "Sandbox",
			"type": "extensionHost",
			"request": "launch",
			"args": [
				"${workspaceFolder}/testing-sandbox",
				"${workspaceFolder}/testing-sandbox/helloWorld.ts",
				"--extensionDevelopmentPath=${workspaceFolder}",
				"--disable-extensions", // Disables other extensions
			],
			"envFile": "${workspaceFolder}/.env",
			"outFiles": [
				"${workspaceFolder}/dist/**/*.js"
			],
			"preLaunchTask": "${defaultBuildTask}"
		},
		/////////////////////// Testing the extension on other real projects ///////////////////////
		{
			"name": "GitHub JOINs",
			"type": "extensionHost",
			"request": "launch",
			"args": [
				"${workspaceFolder}/../github-search-join",
				"--extensionDevelopmentPath=${workspaceFolder}"
			],
			"envFile": "${workspaceFolder}/.env",
			"outFiles": [
				"${workspaceFolder}/dist/**/*.js"
			],
			"preLaunchTask": "${defaultBuildTask}"
		},
		{
			"name": "Git to Blog",
			"type": "extensionHost",
			"request": "launch",
			"args": [
				"${workspaceFolder}/../git-history-to-blog",
				"--extensionDevelopmentPath=${workspaceFolder}"
			],
			"envFile": "${workspaceFolder}/.env",
			"outFiles": [
				"${workspaceFolder}/dist/**/*.js"
			],
			"preLaunchTask": "${defaultBuildTask}"
		},
		// This is the same as Extension, but it runs with the current project directory and the current file
		//   Limitation: Can't open the same directory in two windows - https://stackoverflow.com/a/51426734/5278310
		//   Created a simlink to workaround
		// 
		// Testing on this project has not been yielded good results I am assuming for two reasons: 
		// - The prompt for multi file editing is too complex and produces low quality output for more context
		{
			"name": "Test on self",
			"type": "extensionHost",
			"request": "launch",
			"args": [
				"${workspaceFolder}/../bread-soft-linked",
				"--extensionDevelopmentPath=${workspaceFolder}"
			],
			"envFile": "${workspaceFolder}/.env",
			"outFiles": [
				"${workspaceFolder}/dist/**/*.js"
			],
			"preLaunchTask": "${defaultBuildTask}"
		},
		{
			"name": "Show Me",
			"type": "extensionHost",
			"request": "launch",
			"args": [
				"${workspaceFolder}/../show-me-chatgpt-plugin",
				"--extensionDevelopmentPath=${workspaceFolder}"
			],
			"envFile": "${workspaceFolder}/.env",
			"outFiles": [
				"${workspaceFolder}/dist/**/*.js"
			],
			"preLaunchTask": "${defaultBuildTask}"
		},
		{
			"name": "Mermiad to Miro",
			"type": "extensionHost",
			"request": "launch",
			"args": [
				"${workspaceFolder}/../mermaid-laid-out-graph",
				"--extensionDevelopmentPath=${workspaceFolder}"
			],
			"envFile": "${workspaceFolder}/.env",
			"outFiles": [
				"${workspaceFolder}/dist/**/*.js"
			],
			"preLaunchTask": "${defaultBuildTask}"
		},
		/////////////////////// Unit tests ///////////////////////
		// Docs: https://code.visualstudio.com/api/working-with-extensions/testing-extension
		{
			"name": "Tests",
			"type": "extensionHost",
			"request": "launch",
			"args": [
				"${workspaceFolder}/testing-sandbox",
				"--disable-extensions", // Disables other extensions
				"--extensionDevelopmentPath=${workspaceFolder}",
				"--extensionTestsPath=${workspaceFolder}/out/test/mochaTestRunner.js"
			],
			"envFile": "${workspaceFolder}/.env",
			"env": {
				"MOCHA_IGNORE_TIMEOUT": "true",
			},
			"outFiles": [
				"${workspaceFolder}/out/**/*.js",
				"${workspaceFolder}/dist/**/*.js"
			],
			"preLaunchTask": "${defaultBuildTask}",
			// Because the test compilation tasks or watch tasks they will not rebuild unless content changes
			// So if we just clean the out directory it will not trigger a re-run
			// "postDebugTask": "clean: out-directory"
		},
		/////////////////////// Prompt engineering ///////////////////////
		{
			"name": "Prompt codegen",
			"type": "node",
			"runtimeExecutable": "npm",
			"runtimeArgs": [
				"run-script",
				"codegen:prompt-checkpoints"
			],
			"request": "launch",
			"outFiles": [
				"${workspaceFolder}/out/**/*.js",
				"${workspaceFolder}/dist/**/*.js"
			],
			"preLaunchTask": "${defaultBuildTask}",
		}
	]
}